<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Time Management</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <style>
    body {
        font-family: "Lato", sans-serif;
    }

    .sidenav {
        height: 100%;
        width: 180px;
        position: fixed;
        z-index: 1;
        top: 0;
        left: 0;
        background-color: white;
        overflow-x: hidden;
        padding-top: 20px;

    }

    .sidenav .sidenav-links{
      padding: 30px;

    }

    .sidenav a {
        padding: 6px 8px 6px 16px;
        text-decoration: none;
        font-size: 20px;
        color: #1ab2ba;
        display: block;

    }

    .sidenav a:hover {
        color: black;
    }

    /*.main-banner {
        margin-left: 160px;
        font-size: 28px;
        padding: 0px 10px;
    }*/

    @media screen and (max-height: 450px) {
        .sidenav {padding-top: 15px;}
        .sidenav a {font-size: 18px;}
    }
    .image img{
        width: 90%;
        height: 42em;
        margin-left: 11%;
     }
     .text-holder{
               position: absolute;
               height: 100%;
               width: 35%;
               top: 0%;
               right: 10%;
               display: inline-block;
               margin: 0px;
               overflow:hidden;
               font-size: 17px;
               background-color: rgba(232, 228, 225,0.5);
               color: #1ab2ba;
               z-index: 20;
               text-align: center;
               padding: 1em;
               font-weight: bold;
             }

          .card-container.card {
          position: relative;
          margin-top:30px;
          margin-left: 0px;
            max-width: 400px;
            max-height: 500px;
            padding: 30px 30px;

        }

        .btn {
            font-weight: 700;
            height: 36px;
            -moz-user-select: none;
            -webkit-user-select: none;
            user-select: none;
            cursor: default;
        }

        /*   * Card component      */
        .card {
            background-color: transparent;

            margin: 0 auto 25px;
            margin-top: 50px;
            margin-left: 10px;
            font-size: 20px;
            font-family: Times New Roman;
            border: none;
        }

        .profile-img-card {
        width: 96px;
        height: 96px;
        margin: 0 auto 10px;
        display: block;
        -moz-border-radius: 50%;
        -webkit-border-radius: 50%;
        border-radius: 50%;
        }

        /*
         * Form styles
         */
        .profile-name-card {
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            margin: 10px 0 0;
            min-height: 1em;
        }

        .form-signin #inputEmail,
        .form-signin #inputPassword {
            direction: ltr;
            height: 44px;
            font-size: 16px;
        }

        .form-signin input[type=email],
        .form-signin input[type=password],
        .form-signin input[type=text],
        .form-signin button {
            width: 100%;
            display: block;
            margin-bottom: 10px;
            z-index: 1;
            position: relative;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
        }

        .form-signin .form-control:focus {
            border-color: rgb(104, 145, 162);
            outline: 0;
            -webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgb(104, 145, 162);
            box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgb(104, 145, 162);
        }

        .btn.btn-signin {
            /*background-color: #4d90fe; */
            background-color: rgb(104, 145, 162);
            /* background-color: linear-gradient(rgb(104, 145, 162), rgb(12, 97, 33));*/
            padding: 0px;
            font-weight: 700;
            font-size: 14px;
            height: 36px;
            -moz-border-radius: 3px;
            -webkit-border-radius: 3px;
            border-radius: 3px;
            border: none;
            -o-transition: all 0.218s;
            -moz-transition: all 0.218s;
            -webkit-transition: all 0.218s;
            transition: all 0.218s;
        }

        .btn.btn-signin:hover,
        .btn.btn-signin:active,
        .btn.btn-signin:focus{
          background-color: rgb(12, 97, 33);
        }

        .container-f{
          background-color: #263238;
           height: 100px; margin-top: -20px;
          }

    </style>


</head>

<body>

  <div class="main-banner">
    <div class="sidenav">
      <a href="#"><img src="/images/logo.jpg" style="border-radius: 50%; height: 6em; width: 6em; ;"></a>
      <div class="sidenav-links"></div>
          <a href="/examPrep/<%= user._id %>">Exam Preparation</a>
          <a href="/graph/<%= user._id %>">Progress Check</a>
          <a href="/profile/<%= user._id %>">Profile</a>
          <a href="/discussion">Group Discussions</a>
      </div>
    </div>

    <div class="container container-table">
        <div class="row vertical-center-row" style="margin-top:20px;">
          <div class="text-center col-md-12" style="margin-left : 5%;">
            <div id="countdowntimer" style="right=0;top:10%;margin:auto; width:80%; text-align:right;" >
        		  <input type="hidden" id="date" value="<%= user.deadline %>">
        		  <br><br>
        		  <button onclick="start()">Get Deadline</button>
        		  <Strong><h1 id="demo"></h1></Strong>
      	      </div>
            <h3><%= user.faculty %>, Sem-<%= user.sem %></h3>
            <table class="table table-striped">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col" style="text-align : center">Subject Name</th>
                  <th scope="col" style="text-align : center">Chapters</th>
                </tr>
              </thead>
              <tbody>
                <form action="/tickSubject" method="post">
                  <input type="hidden" name="userId" value="<%= user._id %>">
                    <% user.subjects.forEach(function(subject,i){ %>
                      <tr>
                        <td><%= ++i %></td>
                        <td><%= subject.subjectName %></td>
                        <td>
                          <table class="table table-striped">
                            <thead>
                              <tr>
                                <td>Name</td>
                                <td>Hours</td>
                                <td>Marks</td>
                                <td>Studied?</td>
                              </tr>
                            </thead>
                            <tbody>

                              <% user.chapters.forEach(function(chapter,i){
                                if(chapter.subjectCode == subject.subjectCode){ %>
                                  <tr>
                                    <td><%= chapter.chapterName %></td>
                                    <td><%= chapter.hours %></td>
                                    <td><%= chapter.marks %></td>
                                    <td>
                                      <input type="checkbox" id="myCheck" <%= chapter.checked ? 'checked' : '' %> name="studied[<%= i %>]">
                                      <input type="hidden" name="chapter" value="<%= JSON.stringify(chapter) %>">
                                      <input type="hidden" name="subjectCode" value="<%= subject.subjectCode %>">
                                    </td>
                                </tr>
                                <%} }) %>

                            </tbody>
                          </table>
                        </td>

                      </tr>
                    <% }) %>
                    <button style="float:right;">Add Changes</button>

              </form>
              </tbody>
            </table>
          </div>
        </div>
      </div>


    <!-- Bootstrap core JavaScript -->
    <script src="javascripts/jquery.min.js"></script>
    <script src="javascripts/bootstrap.bundle.min.js"></script>

    <!-- Menu Toggle Script -->
    <script>

    function  start(){
    var deadlineDate =null;
// Set the date we're counting down to
var deadlineDate= document.getElementById("date").value;
var Months = ['','Jan','Feb','Mar','Apr','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
var date = new Date(deadlineDate);
var deadlineDate = Months[date.getMonth()] + ' ' + date.getDate() +','+ ' ' + date.getFullYear()+' ';
console.log(deadlineDate);

// var countDownDate = new Date("Jan 4, 2020 15:37:25").getTime();
var countDownDate = new Date(deadlineDate + "14:00:00").getTime();


// Update the count down every 1 second
var x = setInterval(function() {

    // Get todays date and time
    var now = new Date().getTime();

    // Find the distance between now and the count down date
    var distance = countDownDate - now;

    // Time calculations for days, hours, minutes and seconds
    var days = Math.floor(distance / (1000 * 60 * 60 * 24));
    var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((distance % (1000 * 60)) / 1000);

    // Output the result in an element with id="demo"
    document.getElementById("demo").innerHTML = days + "d " + hours + "h "
    + minutes + "m " + seconds + "s ";

    // If the count down is over, write some text
    if (distance < 0) {
  clearInterval(x);
  document.getElementById("demo").innerHTML = "EXPIRED";
    }
}, 1000);

}

    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>

</body>

</html>
